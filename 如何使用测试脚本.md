# 📋 如何使用测试脚本

## 🚀 快速测试（推荐）

### 方法 1：使用完整测试脚本

1. **打开应用页面：**
   ```
   https://ziqichen55555.github.io/thelittlenestcalendar/
   ```

2. **打开浏览器控制台：**
   - 按 `F12` 或 `Ctrl+Shift+I` (Windows) 或 `Cmd+Option+I` (Mac)
   - 切换到 **Console** 标签

3. **复制并运行脚本：**
   - 打开 `完整测试脚本.js` 文件
   - 复制全部内容
   - 粘贴到浏览器控制台
   - 按 `Enter` 运行

4. **查看结果：**
   - 脚本会自动测试 OPTIONS、GET、POST 请求
   - 查看控制台输出，确认哪些测试通过/失败

### 方法 2：使用简单测试脚本

1. **打开浏览器控制台**（同上）

2. **复制并运行：**
   - 打开 `测试脚本.js` 文件
   - 复制全部内容
   - 粘贴到浏览器控制台
   - 按 `Enter` 运行

3. **查看结果：**
   - 查看 OPTIONS 和 GET 请求的结果

## 📊 测试结果说明

### ✅ OPTIONS 请求成功

如果看到：
```
✅ OPTIONS 成功
  状态码: 200 或 204
```

说明：
- `doOptions` 函数工作正常
- CORS 配置正确
- POST 请求应该可以正常工作

### ❌ OPTIONS 请求失败

如果看到：
```
❌ OPTIONS 请求失败！
错误信息: Load failed 或 CORS 错误
```

说明：
- `doOptions` 函数可能未正确部署
- 或 Web App 访问权限设置不正确
- 需要检查部署设置

## 🔍 详细诊断

测试脚本会输出：
- **状态码**：HTTP 状态码（200/204 表示成功）
- **响应头**：CORS 相关的响应头
- **响应内容**：服务器返回的内容
- **错误信息**：如果失败，会显示详细的错误信息

## 💡 提示

1. **确保已部署最新代码：**
   - 确认 Google Apps Script 中有 `doOptions` 函数
   - 确认已重新部署（选择"新版本"）

2. **清除浏览器缓存：**
   - 硬刷新：`Ctrl+Shift+R` (Windows) 或 `Cmd+Shift+R` (Mac)

3. **如果测试失败：**
   - 查看控制台的详细错误信息
   - 检查 Google Apps Script 的执行日志
   - 确认 Web App 访问权限设置为"所有人"

## 🆘 需要帮助？

如果测试脚本显示 OPTIONS 失败，请提供：
1. **控制台的完整输出**（复制所有输出）
2. **Google Apps Script 的执行日志**（是否看到 `doOptions` 被调用）
3. **浏览器和版本**（Chrome、Firefox 等）

这样我可以进一步诊断问题。

